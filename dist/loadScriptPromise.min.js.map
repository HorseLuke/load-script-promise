{"version":3,"file":"loadScriptPromise.min.js","sources":["../lib/load-script/callbackListStore.js","../lib/load-script/helper.js","../lib/config/config.js","../lib/load-script/load.js","../lib/load-script-promise/load.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/regenerator/index.js","../lib/load-script-provider/providerListStore.js","../lib/load-script-provider/helper.js","../lib/load-script-provider/loadProvider.js","../index.js"],"sourcesContent":["/**\r\n * Store load callback function\r\n */\r\n\r\nconst srcCbList = {};\r\n\r\nfunction addCallback(id, cb){\r\n    if(!Object.prototype.hasOwnProperty.call(srcCbList, id)){\r\n        srcCbList[id] = [];\r\n    }\r\n\r\n    srcCbList[id].push(cb);\r\n\r\n}\r\n\r\nfunction getList(id){\r\n    if(!Object.prototype.hasOwnProperty.call(srcCbList, id)){\r\n        return [];\r\n    }\r\n\r\n    return srcCbList[id];\r\n\r\n}\r\n\r\n\r\nfunction hasList(id){\r\n    if(!Object.prototype.hasOwnProperty.call(srcCbList, id)){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction clearList(id){\r\n    if(!Object.prototype.hasOwnProperty.call(srcCbList, id)){\r\n        return true;\r\n    }\r\n    delete srcCbList[id];\r\n    return true;\r\n}\r\n\r\n\r\nfunction getAndClearList(id){\r\n    let cbList = getList(id);\r\n    if(cbList.length > 0){\r\n        clearList(id);\r\n    }\r\n    return cbList;\r\n}\r\n\r\n\r\nexport {\r\n    addCallback,\r\n    getList,\r\n    hasList,\r\n    clearList,\r\n    getAndClearList\r\n};","const dataScriptMark = \"data-is-dynamic-script-loader-aZIX-tzZo51pnPMwX\";\r\nconst idScriptMark = \"dynamic_script_loader_adj2_sdfds63__\";\r\n\r\nlet srcLoadCount = 0;\r\n\r\nfunction setAttributes(script, attrs) {\r\n    for (var attr in attrs) {\r\n      script.setAttribute(attr, attrs[attr]);\r\n    }\r\n}\r\n\r\n\r\nfunction generateId(){\r\n    return idScriptMark + (++srcLoadCount) + \"_\" + Date.now() + \"_\" +  parseInt(Math.random() * 100000);\r\n}\r\n\r\n\r\nfunction findScriptDomsBySrc(src){\r\n    let list = document.querySelectorAll(\"head script[\" + dataScriptMark + \"]\");\r\n    for(let i=0; i<list.length; i++){\r\n      let scriptDom = list[i];\r\n      if(scriptDom.getAttribute(dataScriptMark) != \"1\"){\r\n        continue;\r\n      }\r\n      if(scriptDom.getAttribute(\"data-load-status\") == \"error\"){\r\n        continue;\r\n      }\r\n      if(scriptDom.getAttribute(\"data-origin-src\") === src){\r\n        return scriptDom;\r\n      }\r\n\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\nfunction markScriptDomBelongThisModule(script, src){\r\n    script.setAttribute(dataScriptMark, \"1\");\r\n    script.setAttribute(\"data-load-status\", \"loading\");\r\n    script.setAttribute(\"data-load-time\", Date.now());\r\n    script.setAttribute(\"data-origin-src\", src);\r\n    script.id = generateId();\r\n}\r\n\r\nexport {\r\n    dataScriptMark,\r\n    idScriptMark,\r\n    setAttributes,\r\n    generateId,\r\n    findScriptDomsBySrc,\r\n    markScriptDomBelongThisModule\r\n}","/**\n * @link http://blog.csdn.net/lihongxun945/article/details/48529371\n */\n\nconst cfg = {\n\n\t//version\n\t\"ver\": \"0.1\",\n\n\t//remove script tag when load error\n\t\"scriptRemoveOnerror\": true,\n\n\t//provider using windowKey detect mode retry between mil seconds\n\t\"windowKeyRetryDetectDelay\": 100,\n\n\t//provider using windowKey detect mode retry count\n\t\"windowKeyRetryCount\": 3,\n\n\t//loadProvider detect dependency recusive max allow count.\n\t//Because detect provider would run twice, sometimes may detect dependency recusive twice (although is fake report).\n\t//Setting to 10 is a trade off value.\n\t\"loadProviderDependencyMaxRecusiveAllow\": 10\n};\n\nconst config = {\n\t'get': function(str, def){\n\t\tif(str){\n\t\t\tdef = def || null;\n\t\t\treturn cfg[str] === undefined ? def : cfg[str];\n\t\t}else{\n\t\t\treturn cfg;\n\t\t}\n\t},\n\t\"set\": function(key, val){\n\t\t\n\t\tif(typeof key === 'string'){\n\t\t\tcfg[key] = val;\n\t\t\treturn ;\n\t\t}\n\n\t\tfor(var i in key){\n\t\t\tcfg[i] = key[i];\n\t\t}\n\t}\n};\n\nexport default config;","/**\n * Code is from load-script\n * @link https://github.com/eldargab/load-script\n */\n\nimport * as callbackListStore from \"./callbackListStore\";\nimport {setAttributes, findScriptDomsBySrc, markScriptDomBelongThisModule} from \"./helper\";\nimport config from \"../config/config\";\n\nfunction runCallbackListOnSuccess(script){\n  let list = callbackListStore.getAndClearList(script.id);\n\n  if(list.length < 1){\n    return false;\n  }\n  \n  for(let i = 0; i < list.length; i++){\n    try{\n      list[i](null, script);\n    }catch(e){\n      if(console){\n        console.error(e);\n      }\n    }\n  }\n}\n\n\nfunction runCallbackListOnError(script, error){\n\n  let list = callbackListStore.getAndClearList(script.id);\n\n  if(list.length < 1){\n    return false;\n  }\n\n  let errorMessage = \"Failed to load script[id=\" + script.id + \"],[src=\" + script.getAttribute(\"data-origin-src\") + \"]. Error detail: \" + error;\n  let errorInstance = new Error(errorMessage);\n  errorInstance.customScript = script;\n  errorInstance.customError = error;\n\n  for(let i = 0; i < list.length; i++){\n    try{\n      list[i](errorInstance);\n    }catch(e){\n      if(console){\n        console.error(e);\n      }\n    }\n  }\n}\n\n\nfunction stdOnEnd (script) {\n  script.onload = function () {\n    this.onerror = this.onload = null;\n    this.setAttribute(\"data-load-status\", \"success\");\n    runCallbackListOnSuccess(this);\n  };\n  script.onerror = function (error) {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null;\n    this.setAttribute(\"data-load-status\", \"error\");\n    runCallbackListOnError(this, error);\n    if(config.get(\"scriptRemoveOnerror\") != false){\n      this.remove();\n    }\n  };\n}\n\n\nfunction ieOnEnd (script) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded'){\n      return ;\n    }\n    this.onreadystatechange = null;\n    this.setAttribute(\"data-load-status\", \"success\");\n    runCallbackListOnSuccess(this);    // there is no way to catch loading errors in IE8\n  };\n}\n\n\nfunction load (src, opts, cb) {\n\n  if (typeof opts === 'function') {\n    cb = opts;\n    opts = {};\n  }\n  \n  opts = opts || {};\n  cb = cb || function() {};\n\n  do{\n    var existScriptDom = findScriptDomsBySrc(src);\n    if(existScriptDom == null){\n      break;\n    }\n\n    if(existScriptDom.getAttribute(\"data-load-status\") == \"loading\"){\n      callbackListStore.addCallback(existScriptDom.id, cb);\n      return ;\n    }\n\n    if(existScriptDom.getAttribute(\"data-load-status\") == \"success\"){\n      cb(null, existScriptDom);\n      return ;\n    }\n\n  }while(false);\n\n  var script = document.createElement('script');\n  \n  script.type = opts.type || 'text/javascript';\n  script.charset = opts.charset || 'utf-8';\n  script.async = 'async' in opts ? !!opts.async : true;\n  script.src = src;\n  \n  if (opts.attrs) {\n      setAttributes(script, opts.attrs);\n  }\n  \n  if (opts.text) {\n      script.text = '' + opts.text;\n  }\n\n  markScriptDomBelongThisModule(script, src);\n  callbackListStore.addCallback(script.id, cb);\n\n  if('onload' in script){\n    stdOnEnd(script);\n  }else{\n    ieOnEnd(script);\n  }\n  \n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script);\n  }\n  \n  var head = document.head || document.getElementsByTagName('head')[0];\n  head.appendChild(script);\n}\n\nexport default load;\n\n\n","import load from \"../load-script/load\";\n\n/**\n * code from load-script issues 20\n * @link https://github.com/eldargab/load-script/issues/20\n */\nfunction loadPromise(src, options){\n  return new Promise((resolve, reject) => {\n    load(src, options, (err, script) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(script);\n      }\n    });\n  });\n}\n\nexport default loadPromise;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","/**\r\n * Store provider\r\n */\r\n\r\nlet providerListStore = {};\r\n\r\nfunction checkOption(option, id){\r\n\r\n    id = id || \"unknown\";\r\n\r\n  \r\n    if(!Object.prototype.hasOwnProperty.call(option, \"src\")){\r\n        throw new Error(\"Specific provider options does not have src value. Provider id is \" + id);\r\n    }\r\n\r\n    do{\r\n        if(Object.prototype.hasOwnProperty.call(option, \"windowKey\")){\r\n            break;\r\n        }\r\n\r\n        if(Object.prototype.hasOwnProperty.call(option, \"detectProvider\")){\r\n            break;\r\n        }\r\n\r\n        throw new Error(\"Specific provider options must have 'windowKey' value or 'detectProvider' anonymous function. Provider id is \" + id);\r\n\r\n    }while(false);\r\n\r\n\r\n    return true;\r\n\r\n}\r\n\r\nfunction has(id){\r\n    if(!Object.prototype.hasOwnProperty.call(providerListStore, id)){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction get(id){\r\n    if(!Object.prototype.hasOwnProperty.call(providerListStore, id)){\r\n        return {};\r\n    }\r\n    return providerListStore[id];\r\n}\r\n\r\nfunction set(id, option){\r\n    checkOption(option, id);\r\n    providerListStore[id] = option;\r\n}\r\n\r\nfunction del(id){\r\n    if(!Object.prototype.hasOwnProperty.call(providerListStore, id)){\r\n        return true;\r\n    }\r\n    delete providerListStore[id];\r\n}\r\n\r\nfunction clear(){\r\n    providerListStore = {};\r\n}\r\n\r\n\r\nexport {\r\n    has,\r\n    get,\r\n    set,\r\n    del,\r\n    clear,\r\n    checkOption\r\n};","import config from \"../config/config\";\r\n\r\nfunction generateErrorFromLoader(msg ,loader){\r\n    let errorInstance = new Error(msg);\r\n    errorInstance.customId = loader.id;\r\n    errorInstance.customOption = loader.option;\r\n    errorInstance.customStatus = loader.status;\r\n    errorInstance.customScript = loader.script;\r\n    return errorInstance;\r\n}\r\n\r\nfunction isValidReturnResource(resource){\r\n    if(resource === true){\r\n        return true;\r\n    }\r\n\r\n    if(resource === false){\r\n        return false;\r\n    }\r\n\r\n    if(typeof resource == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    if(resource === null){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n\r\n}\r\n\r\n\r\nfunction getOptionOrConfigFormatInt(option, optionKey, configKey){\r\n\r\n    configKey = configKey || optionKey;\r\n\r\n    let value = 0;\r\n    if(Object.prototype.hasOwnProperty.call(option, optionKey)){\r\n        value = option[optionKey];\r\n    }else{\r\n        value = config.get(configKey);\r\n    }\r\n\r\n    value = parseInt(value);\r\n\r\n    if(isNaN(value)){\r\n        value = 0;\r\n    }\r\n\r\n    return value;\r\n\r\n}\r\n\r\n\r\nasync function runDetectProviderByOption(loader){\r\n\r\n    if(Object.prototype.hasOwnProperty.call(loader.option, \"windowKey\")){\r\n        return await runDetectProviderByOptionWindowKey(loader);\r\n    }\r\n\r\n    if(Object.prototype.hasOwnProperty.call(loader.option, \"detectProvider\")){\r\n        return await runDetectProviderByOptionDetectProvider(loader);\r\n    }\r\n\r\n    let errorInstance = generateErrorFromLoader(\"Specific provider options does not have 'windowKey' value nor 'detectProvider' anonymous function.\", loader);\r\n    throw errorInstance;\r\n\r\n}\r\n\r\nasync function runDetectProviderByOptionWindowKey(loader){\r\n\r\n    let windowKeyRetryDetectDelay = getOptionOrConfigFormatInt(loader.option, \"windowKeyRetryDetectDelay\");\r\n    let windowKeyRetryCount = getOptionOrConfigFormatInt(loader.option, \"windowKeyRetryCount\") - 1;\r\n\r\n    if(window[loader.option.windowKey]){\r\n        return window[loader.option.windowKey];\r\n    }\r\n\r\n    if(loader.status == \"detect\"){\r\n        return undefined;\r\n    }\r\n\r\n    for(let i = 1; i <= windowKeyRetryCount; i++){\r\n        if(windowKeyRetryDetectDelay > 0){\r\n            await new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                    resolve(true);\r\n                }, windowKeyRetryDetectDelay);\r\n            });\r\n        }\r\n        \r\n        if(window[loader.option.windowKey]){\r\n            return window[loader.option.windowKey];\r\n        }\r\n\r\n    }\r\n\r\n    let errorInstance = generateErrorFromLoader(\"'windowKey' is used for search specific provider in window object, but found nothing. provider id is \" + loader.id + \"; 'windowKey' is \" + loader.option.windowKey, loader);\r\n\r\n    throw errorInstance;\r\n\r\n}\r\n\r\n\r\n//\r\nasync function runDetectProviderByOptionDetectProvider(loader){\r\n\r\n    let resource = loader.option.detectProvider(loader);\r\n    if(resource instanceof Promise){\r\n        resource = await resource;\r\n    }\r\n\r\n    if(isValidReturnResource(resource)){\r\n        return resource;\r\n    }\r\n\r\n    if(loader.status == \"detect\"){\r\n        return undefined;\r\n    }\r\n\r\n    let errorInstance = generateErrorFromLoader(\"'detectProvider' is used for search specific provider, but return not true, nor valid resource. provider id is \" + loader.id + \".\", loader);\r\n\r\n    throw errorInstance;\r\n\r\n}\r\n\r\nexport {\r\n    runDetectProviderByOption,\r\n    getOptionOrConfigFormatInt,\r\n    isValidReturnResource\r\n}","import load from \"../load-script-promise/load\";\nimport * as providerListStore from \"./providerListStore\";\nimport {runDetectProviderByOption, isValidReturnResource} from \"./helper\";\nimport config from \"../config/config\";\n\nasync function loadProvider(id){\n\n  const dependencyTree = [];\n\n  function addProviderToDependency(id){\n\n    let recursiveCount = 0;\n    let recursiveMaxAllow = config.get(\"loadProviderDependencyMaxRecusiveAllow\");\n\n    for(let i = 0; i < dependencyTree.length; i++){\n\n      if(id !== dependencyTree[i]){\n        continue;\n      }\n\n      recursiveCount++;\n\n      //console.error([recursiveCount, dependencyTree.length]);\n\n      if(recursiveCount <= recursiveMaxAllow){\n        continue;\n      }\n\n      throw new Error(\"Recursive provider dependency detect, abort as reaching config 'loadProviderDependencyMaxRecusiveAllow'. Recursive provider chain: \" + dependencyTree.join(\" -> \") + \" -> \" + id + \" [STOP AT THIS]\");\n\n    }\n\n    dependencyTree.push(id);\n\n    return dependencyTree.length - 1;\n\n  }\n\n\n  function generateProviderLoader(id, loadProviderFunction){\n\n    const dependencyTreeId = addProviderToDependency(id);\n\n    let loader = {\n      dependencyTreeId: dependencyTreeId,\n      id: id,\n      option: providerListStore.get(id),\n      status: \"init\",\n      script: null,\n      loadProvider: loadProviderFunction\n    };\n\n    return loader;\n  \n  }\n\n  async function runProviderLoader(loader){\n\n    providerListStore.checkOption(loader.option);\n\n    loader.status = \"detect\";\n    let resource = await runDetectProviderByOption(loader);\n\n    if(resource === true){\n      return resource;\n    }\n\n    if(isValidReturnResource(resource)){\n      return resource;\n    }\n\n    let opts = loader.option.opts || {};\n\n    loader.script = await load(loader.option.src, opts);\n\n    loader.status = \"load\";\n    return await runDetectProviderByOption(loader);\n\n  }\n\n  async function loadProviderWithCheckConflict(id){\n    //console.log([\"loadProviderWithCheckConflict\", id]);\n    const loader = generateProviderLoader(id, loadProviderWithCheckConflict);\n    return await runProviderLoader(loader);\n  }\n\n  //console.log([\"loadProvider\", id]);\n  return await loadProviderWithCheckConflict(id);\n  \n}\n\n\nexport default loadProvider;","import loadScriptPromiseLoad from \"./lib/load-script-promise/load\";\nimport loadScriptTraditionMode from \"./lib/load-script/load\";\nimport {dataScriptMark, findScriptDomsBySrc} from \"./lib/load-script/helper\";\nimport loadProvider from \"./lib/load-script-provider/loadProvider\";\nimport * as providerListStore from \"./lib/load-script-provider/providerListStore\";\nimport config from \"./lib/config/config\";\n\nconst loadScript = {};\n\nloadScript.load = loadScriptPromiseLoad;\nloadScript.loadTraditionMode = loadScriptTraditionMode;\n\nloadScript.setProvider = providerListStore.set;\nloadScript.loadProvider = loadProvider;\nloadScript.providerListStore = providerListStore;\n\nloadScript.dataScriptMark = dataScriptMark;\nloadScript.findScriptDomsBySrc = findScriptDomsBySrc;\n\nloadScript.config = config;\n\nexport default loadScript;"],"names":["srcCbList","addCallback","id","cb","Object","prototype","hasOwnProperty","call","push","getAndClearList","cbList","getList","length","clearList","dataScriptMark","srcLoadCount","findScriptDomsBySrc","src","list","document","querySelectorAll","i","scriptDom","getAttribute","markScriptDomBelongThisModule","script","setAttribute","Date","now","parseInt","Math","random","cfg","config","str","def","undefined","key","val","runCallbackListOnSuccess","callbackListStore","e","console","error","stdOnEnd","onload","onerror","this","errorMessage","errorInstance","Error","customScript","customError","runCallbackListOnError","get","remove","load","opts","existScriptDom","createElement","type","charset","async","attrs","attr","setAttributes","text","onreadystatechange","readyState","ieOnEnd","head","getElementsByTagName","appendChild","loadPromise","options","Promise","resolve","reject","err","asyncGeneratorStep","gen","_next","_throw","arg","info","value","done","then","_asyncToGenerator","fn","self","args","arguments","apply","runtime","exports","Op","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","regenerator","require$$0","providerListStore","checkOption","option","set","generateErrorFromLoader","msg","loader","customId","customOption","customStatus","status","isValidReturnResource","resource","getOptionOrConfigFormatInt","optionKey","configKey","runDetectProviderByOption","runDetectProviderByOptionWindowKey","runDetectProviderByOptionDetectProvider","windowKeyRetryDetectDelay","windowKeyRetryCount","window","windowKey","setTimeout","detectProvider","addProviderToDependency","generateProviderLoader","runProviderLoader","loadProviderWithCheckConflict","loadProviderFunction","dependencyTreeId","loadProvider","recursiveCount","recursiveMaxAllow","dependencyTree","join","loadScript","loadScriptPromiseLoad","loadTraditionMode","loadScriptTraditionMode","setProvider"],"mappings":"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"}